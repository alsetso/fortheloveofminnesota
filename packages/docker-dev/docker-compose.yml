version: '3.8'

services:
  # Stripe CLI for local webhook testing
  stripe-cli:
    image: stripe/stripe-cli:latest
    container_name: minnesota-stripe-cli
    command: listen --forward-to http://host.docker.internal:4000/webhooks/stripe --skip-verify
    environment:
      - STRIPE_API_KEY=${STRIPE_SECRET_KEY}
    volumes:
      - stripe-config:/root/.config/stripe
    networks:
      - minnesota-dev
    restart: unless-stopped
    # Note: You'll need to login to Stripe CLI first:
    # docker exec -it minnesota-stripe-cli stripe login

networks:
  minnesota-dev:
    driver: bridge

volumes:
  stripe-config:


